nodeSetup
=========

This role prepares all nodes for the installation. It will

* distributes the credentials generated by the role prepareCredentials to all nodes
* create a physical bridge (typically br-phys, determined by variable name phys_bridge_name) and connect it to phys_interface using a patch port - only if phys_bridge_create is true
* bring up all required networking devices and set up local name resolution

Note that at this point, we also enable an APT proxy on the nodes. This is especially useful if we setup a larger
number of machines or start over in short cycles, as it avoids the repeated downloads. To enable the usage of an APT cache, set

use_apt_proxy: True
apt_proxy_url:  http://192.168.178.25:3142

where of course you need to replace the IP address and port with the URL of your proxy. If you use apt-cacher-ng, the default port is 3142.



Requirements
------------

We need the file credentials.yaml and the SSH key present on the Ansible host

Role Variables
--------------

The following variables need to be set when invoking this role:

* credentials_dir - the directory in which the credentials are created
* install_user - the user which we will use to run those parts of the installation process which do not require elevated privileges - default vagrant
* install_user_home - the home directory of this user on each node
* ssh_key_name - the name of the SSH key to distribute
* vm_network_device - this is the name of the device that we use for inter-VM traffic on layer2. We expect that this device has no IP address assigned and simply bring it up
* phys_interface - the name of a virtual or physical interface to which we will connect the physical bridge
* phys_bridge_name - name of the physical bridge (typically br-phys)


The following variables are used but have a default:

* openstack_release - the name of the Openstack release that we install
* use_apt_proxy - use a proxy server for APT  (default: False)
* apt_proxy_url - proxy URL for ATP
* phys_bridge_create - boolean, whether to create a physical bridge on this node (defaults to false)

Dependencies
------------

None


License
-------

MIT

Author Information
------------------

Visit me at https://www.github.com/christianb93
